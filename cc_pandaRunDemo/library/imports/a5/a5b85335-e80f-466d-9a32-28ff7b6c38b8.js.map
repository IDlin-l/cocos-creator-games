{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        platform_list:[],\n        move_speed:0.1,\n        platform_prafab: [cc.Prefab],\n        platform_layer: cc.Node,\n        gold_group_list: [cc.Prefab],\n        maxMoveSpeed:8, //平台最大移动速度\n    },\n\n    initPlatforms: function (list) {\n        this.platform_list = list;\n\n        list.forEach(function(element) {\n            element.setAnchorPoint(0, 0);\n        }, this);\n    },\n\n    generate: function (last_platform) {\n        //随机N种平台\n        var random_num = Math.random() * 4;\n        random_num = Math.floor(random_num);\n\n        var platform_temp = cc.instantiate(this.platform_prafab[random_num]);\n        platform_temp.setAnchorPoint(0,0);\n\n        /**\n         *设置坐标 \n         */\n\n        //x\n        var layer_size = this.platform_layer.getContentSize();\n        platform_temp.x = layer_size.width;\n\n        //随机Y值(不能太高，所以-100)\n        platform_temp.y = Math.random() * (layer_size.height - 100);\n        cc.log(platform_temp.y);\n\n        //防止Y对于前面的平台过高，跳不上去\n        var max_offy = 100;\n        if (platform_temp.y > last_platform.y + max_offy) {\n            platform_temp.y = last_platform.y + max_offy;\n        }\n\n        \n        //添加到节点\n        this.platform_list.push(platform_temp);\n        this.platform_layer.addChild(platform_temp);\n\n        //一定的几率平台添加金币\n        // if (Math.random() >= 0.5) {\n            var index = Math.random() * 3;\n            index = Math.floor(index);\n            var gold_group = cc.instantiate(this.gold_group_list[index]);\n            var platform_size = platform_temp.getContentSize();\n            gold_group.setPosition(platform_size.width / 2, platform_size.height);\n            platform_temp.addChild(gold_group);\n        // }\n\n        cc.log(\"产出一个平台,平台数=\", this.platform_list.length);\n    },\n\n    // // use this for initialization\n    // onLoad: function () {\n    //     this.schedule(this.onAddSpeed,10);\n    // },\n\n    // onAddSpeed:function(){\n    //     this.move_speed += 0.1;\n    // },\n\n    // onDestroy: function onDisabled() {\n    //      this.unschedule(this.onAddSpeed);\n    // },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n\n        var platform;\n        var remove_count = 0;\n        var list_new = [];\n        for (var index = 0; index < this.platform_list.length; index++) {\n            platform = this.platform_list[index];\n            platform.x -= this.move_speed;\n\n            if (platform.getBoundingBox().xMax > 0) {\n                list_new.push(platform);\n            }\n            else{\n                platform.removeFromParent();\n            }\n        }\n\n        this.platform_list = list_new;\n\n        if (!platform) {\n            return;\n        }\n\n        var winSize = cc.director.getWinSize();\n        var last_platform_bounding_box = platform.getBoundingBox();\n        var right_x = last_platform_bounding_box.x + last_platform_bounding_box.width;\n\n        if (right_x < winSize.width * 0.8) {\n            this.generate(platform)\n        }\n\n        //平台移动速度变更\n        if (this.move_speed < this.maxMoveSpeed) {\n            this.move_speed += 0.001; \n        }\n    },\n});\n"
  ]
}